name: Parallel URL Fetch

on:
  #å¦‚è¦ä½¿ç”¨å®šæ—¶è¿è¡Œï¼Œè¯·æŠŠä¸‹é¢ä¸¤è¡Œå¼€å¤´çš„#ç¬¦å·åˆ é™¤
  #schedule:
  #- cron: '*/10 * * * *' # æ¯10åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼ˆå…¬å¼€åº“æ¯æœˆ2000åˆ†é’Ÿè¿è¡Œæ—¶é•¿ï¼Œæ¯å¤©64åˆ†é’Ÿï¼‰
  workflow_dispatch: 

jobs:
  fetch-urls:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout repository
      uses: actions/checkout@v2

    - name: Fetch URLs in parallel
      # secretsè®¾ç½®ï¼Œå˜é‡åç§°ï¼šhttp
      # å˜é‡å€¼(å¤šä¸ªä¿æ´»ç½‘é¡µä¹‹é—´ç”¨,åˆ†éš”)ï¼šhttp://ä¿æ´»ç½‘å€1,http://ä¿æ´»ç½‘å€2,http://â€¦â€¦â€¦â€¦
      run: |
        IFS=$',ï¼Œ' read -r -a http <<< "${{ secrets.http }}"
         echo "*****************************************************"
         echo "ç”¬å“¥Githubé¡¹ç›®  ï¼šgithub.com/yonggekkk"
         echo "ç”¬å“¥Bloggeråšå®¢ ï¼šygkkk.blogspot.com"
         echo "ç”¬å“¥YouTubeé¢‘é“ ï¼šwww.youtube.com/@ygkkk"
         echo "ğŸ‰Githubå®šæ—¶è¿è¡Œserv00ä¿æ´»ç½‘é¡µğŸ‰"
         echo "è¯·å…ˆç¡®è®¤å·²æˆåŠŸå®‰è£…ç”¬å“¥Serv00æœ¬åœ°SSHä¸‰åè®®ä¸€é”®è„šæœ¬"
         echo "è„šæœ¬åœ°å€ï¼šhttps://github.com/yonggekkk/sing-box-yg"
         echo "*****************************************************"
        for url in "${http[@]}"; do
          response=$(curl -sk "$url" || true)
          if [[ "$response" == *"ç½‘é¡µä¿æ´»å¯åŠ¨"* ]]; then
            echo "ğŸ‰æ­å–œï¼$url âœ…è¿è¡Œæ­£å¸¸ï¼ŒæˆåŠŸæ‹‰èµ·ä¸€æ¬¡ä¿æ´»"
            else
            echo "ğŸ’¥æ¯å…·ï¼$url âŒè¿è¡Œå¤±è´¥ï¼Œâš ï¸ä¿æ´»ç½‘å€æ˜¯å¦æ­£ç¡®æˆ–è€…Serv00ç‚¸äº†"
          fi
        done
        wait
